<idea-plugin>
    <id>kr.jaehoyi.gdshader</id>
    <name>GDShader</name>
    <vendor url="https://www.jaehoyi.kr">Jaeho Yi</vendor>
    
    <resource-bundle>messages.GDShaderBundle</resource-bundle>

    <description>
        <![CDATA[
            Adds support for GDShader (Godot Shading Language) for Godot 4.0+.<br />
            <ul>
                <li>Syntax highlighting for GDShader files</li>
                <li>Indexing of .gdshader files for file search</li>
                <li>Creation of new GDShader files from templates</li>
                <li>Code completion for keywords, standard functions, and custom variables</li>
                <li>Code formatting support</li>
                <li>Rename refactoring support</li>
                <li>Color preview and picker</li>
                <li>Documentation for built-in functions</li>
            </ul>
        ]]>
    </description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        
        <projectViewNestingRulesProvider implementation="kr.jaehoyi.gdshader.GdsNestingRulesProvider" />
        
        <fileType
            name="GDShader File"
            implementationClass="kr.jaehoyi.gdshader.GdsFileType"
            fieldName="INSTANCE"
            language="GDShader"
            extensions="gdshader" />
        <fileType
            name="GDShader Include File"
            implementationClass="kr.jaehoyi.gdshader.GdsIncludeFileType"
            fieldName="INSTANCE"
            language="GDShader"
            extensions="gdshaderinc" />
        
        <lang.parserDefinition
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.GdsParserDefinition" />
        
        <lang.documentationProvider
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.documentation.GdsDocumentationProvider" />
        
        <!-- Highlighting -->
        <lang.syntaxHighlighterFactory
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.highlighting.GdsSyntaxHighlighterFactory" />
        <colorSettingsPage
            implementation="kr.jaehoyi.gdshader.highlighting.GdsColorSettingsPage" />
        <annotator language="GDShader" implementationClass="kr.jaehoyi.gdshader.highlighting.GdsHighlightingAnnotator" />
        
        <!-- Formatting -->
        <lang.formatter
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.formatter.GdsFormattingModelBuilder" />
        <codeStyleSettingsProvider implementation="kr.jaehoyi.gdshader.formatter.GdsCodeStyleSettingsProvider" />
        <langCodeStyleSettingsProvider implementation="kr.jaehoyi.gdshader.formatter.GdsLanguageCodeStyleSettingsProvider" />
        
        <!-- Editor Features -->
        <typedHandler implementation="kr.jaehoyi.gdshader.editor.GdsTypedHandler" />
        <enterHandlerDelegate implementation="kr.jaehoyi.gdshader.editor.GdsEnterHandler" />
        <lang.braceMatcher
                language="GDShader"
                implementationClass="kr.jaehoyi.gdshader.editor.GdsBraceMatcher" />
        <lang.quoteHandler
                language="GDShader"
                implementationClass="kr.jaehoyi.gdshader.editor.GdsQuoteHandler" />
        <lang.findUsagesProvider language="GDShader" implementationClass="kr.jaehoyi.gdshader.editor.GdsFindUsagesProvider" />
        <readWriteAccessDetector implementation="kr.jaehoyi.gdshader.codeinsight.GdsReadWriteAccessDetector" />
        <usageTypeProvider implementation="kr.jaehoyi.gdshader.codeinsight.GdsUsageTypeProvider" />
        <lang.foldingBuilder language="GDShader" implementationClass="kr.jaehoyi.gdshader.editor.GdsFoldingBuilder" />
        <lang.psiStructureViewFactory language="GDShader" implementationClass="kr.jaehoyi.gdshader.editor.GdsStructureViewFactory" />
        <breadcrumbsInfoProvider implementation="kr.jaehoyi.gdshader.editor.GdsBreadcrumbsProvider" />
        <navbar implementation="kr.jaehoyi.gdshader.editor.GdsNavBarExtension" />
        <gotoSymbolContributor implementation="kr.jaehoyi.gdshader.editor.GdsChooseByNameContributor" />
        <lang.commenter language="GDShader" implementationClass="kr.jaehoyi.gdshader.editor.GdsCommenter" />
        
        <!-- Completions -->
        <completion.contributor
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.completion.GdsCompletionContributor" />
        <typedHandler implementation="kr.jaehoyi.gdshader.completion.GdsCompletionTypedHandler" />
        
        <!-- Code Insights -->
        <codeInsight.parameterInfo language="GDShader" implementationClass="kr.jaehoyi.gdshader.codeinsight.GdsParameterInfoHandler" />
        <colorProvider implementation="kr.jaehoyi.gdshader.codeinsight.GdsUniformColorProvider" />
        <colorProvider implementation="kr.jaehoyi.gdshader.codeinsight.GdsConstantColorProvider" />
        <colorProvider implementation="kr.jaehoyi.gdshader.codeinsight.GdsLocalVariableColorProvider" />
        <codeInsight.lineMarkerProvider
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.codeinsight.GdsProcessingFunctionLineMarkerProvider" />
        
        <!-- Refactoring -->
        <lang.refactoringSupport
            language="GDShader"
            implementationClass="kr.jaehoyi.gdshader.refactoring.GdsRefactoringSupportProvider" />
        
        <!-- Reference -->
        <psi.referenceContributor
            language="GDShader"
            implementation="kr.jaehoyi.gdshader.reference.GdsReferenceContributor" />
        
        <!-- File Templates -->
        <internalFileTemplate name="Spatial" />
        <internalFileTemplate name="Canvas Item" />
        <internalFileTemplate name="Particles" />
        <internalFileTemplate name="Sky" />
        <internalFileTemplate name="Fog" />
        <internalFileTemplate name="Shader Include" />
        
    </extensions>
    
    <actions>
        
        <action
            id="GDShader.NewFile"
            class="kr.jaehoyi.gdshader.action.GdsNewFileAction"
            icon="kr.jaehoyi.gdshader.GdsIcons.GDSHADER">
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFile" />
        </action>
        
        <action
            id="GDShaderInclude.NewFile"
            class="kr.jaehoyi.gdshader.action.GdsIncludeNewFileAction"
            icon="kr.jaehoyi.gdshader.GdsIcons.GDSHADERINC">
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFile" />
        </action>
        
    </actions>
</idea-plugin>